---
tags: [vars, configuration, core]
---

# DK-001: The vars.nix System

**Related Code:** `vars.nix`, `library/`
**Last Updated:** 2026-01-05

## Definition
`vars.nix` holds user-specific settings (username, email, default apps). Machine-specific feature toggles are now handled by `library.*` options.

## How It Works

```nix
# In flake.nix
specialArgs = { vars = import ./vars.nix; };
```

## Available Variables

| Variable | Type | Purpose |
|----------|------|---------|
| `username` | string | Primary user account name |
| `gitname` | string | Full name for git commits |
| `email` | string | Email for git and other tools |
| `browser` | string | Default browser |
| `terminal` | string | Default terminal emulator |
| `editor` | string | Default text editor |
| `fileManager` | string | Default file manager |
| `musicPlayer` | string | Default music app |
| `locale` | string | System locale |
| `timezone` | string | System timezone |
| `theme` | string | Theme preset name |
| `features.cli` | bool | **(HM only)** Enable CLI bundler |
| `features.desktop` | bool | **(HM only)** Enable desktop bundler |

## library.* Options (Replaces vars.features for NixOS)

NixOS modules now use `library.*` options instead of `vars.features`:

| Option | Purpose |
|--------|---------|
| `library.core.audio.enable` | PipeWire stack |
| `library.core.bluetooth.enable` | Bluetooth + Blueman |
| `library.core.fonts.enable` | Font packages |
| `library.core.input.enable` | Fcitx5 input method |
| `library.core.files.enable` | Nautilus + Sushi |
| `library.display.sddm.enable` | SDDM display manager |
| `library.display.hyprland.enable` | Hyprland compositor |

Set these in `hosts/<hostname>/default.nix`.

## Design Decisions

1. **No hardcoded paths** — All user-specific paths use `vars.username`
2. **library.* for NixOS** — Fine-grained per-module toggles
3. **vars.features for Home Manager** — HM modules can't access NixOS options

## Edge Cases

- **Fresh install:** Update `vars.nix` before first rebuild
- **hostname:** Defined per-host in `hosts/*/default.nix`, not in vars
