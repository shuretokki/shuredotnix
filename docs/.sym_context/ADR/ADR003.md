---
tags: [architecture, packages, devshell]
---

# ADR-003: DevShell vs System Packages

**Status:** Accepted
**Date:** 2026-01-04

## Context

Developer tools can be installed either:
1. **System packages**: Always available via `environment.systemPackages`
2. **DevShell**: Available only in `nix develop` sessions

## Decision

- **System packages**: Nix-specific tools always needed (`nil`, `nixfmt`, `direnv`)
- **DevShell**: Project-specific tools (`gcc`, `nodejs`, `python3`)

## Consequences

**Positive:**
- Cleaner system PATH
- Project-specific tool versions possible
- Faster rebuilds (fewer system packages)

**Negative:**
- Must run `nix develop` for build tools
- New users might not know to enter devShell

## Alternatives Considered

- **All in system**: Rejected - bloats system, version conflicts
- **All in devShell**: Rejected - need nil/direnv globally for editing
